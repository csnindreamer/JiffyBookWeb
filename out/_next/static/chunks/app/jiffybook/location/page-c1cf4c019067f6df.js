(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{4863:function(e,t,r){Promise.resolve().then(r.bind(r,215))},1660:function(e,t,r){"use strict";r.d(t,{H:function(){return o},I:function(){return s}});var n=r(5863);r(4665),r(2419);let o=n.Z.initializeApp({apiKey:"AIzaSyBlAuR15-nklQR0LEKxFHT4iLOnbT4hWyI",authDomain:"jiffybook-preprod.firebaseapp.com",databaseURL:"https://jiffybook-preprod.firebaseio.com",projectId:"jiffybook-preprod",storageBucket:"jiffybook-preprod.appspot.com",messagingSenderId:"538384824023",appId:"1:538384824023:web:5f2409822cab5be2ce2292",measurementId:"G-JXC4M514VY"});n.Z.firestore();let s=n.Z.auth()},1326:function(e,t,r){"use strict";var n=r(9268),o=r(6006),s=r(6008),a=r(1660),i=r(4734);t.Z=e=>t=>{let[r,l]=(0,o.useState)(null),c=(0,s.useRouter)(),u=(0,o.useRef)(!0);(0,o.useEffect)(()=>{let e=a.I.onAuthStateChanged(e=>{console.log("onAuthStateChanged",e),e?l({uid:e.uid,displayName:e.displayName,email:e.email}):l(null)}),t=()=>{a.I.signOut()};return window.addEventListener("beforeunload",t),()=>{e(),window.removeEventListener("beforeunload",t)}},[]),(0,o.useEffect)(()=>{if(u.current){u.current=!1;return}console.log("User state changed:",r),r||c.push("/")},[r]);let f=()=>{let e=a.I.onAuthStateChanged(e=>{l(e)});return e};(0,o.useEffect)(()=>{let e=f();return()=>{e()}},[]);let d=()=>{setInterval(()=>{f()},6e4)};return(0,o.useEffect)(()=>{r&&d()},[r]),(0,o.useEffect)(()=>{let e=(0,i.v0)(a.H);return e.setPersistence(i.aT),()=>{let e=(0,i.v0)(a.H);e.setPersistence(i.aT)}},[]),(0,n.jsx)(e,{user:r,...t})}},215:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(9268),o=r(6006),s=r(4283),a=e=>{let{onSearch:t}=e,[r,s]=(0,o.useState)("");return(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"text",value:r,onChange:e=>s(e.target.value)}),(0,n.jsx)("button",{onClick:()=>{t(r)},children:"Search"})]})},i=r(4214),l=r(2040);let c={width:"100%",height:"100vh"},u={lat:0,lng:0};var f=e=>{let{markers:t,onSearch:r}=e,[f,d]=(0,o.useState)({lat:0,lng:0}),[h,p]=(0,o.useState)([]),[g,m]=(0,o.useState)([]);(0,o.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:r}=e.coords;d({lat:t,lng:r})},e=>{console.error("Error getting current location:",e)})},[]),(0,o.useEffect)(()=>{if(h.length>0){let e=h.map((e,t)=>{let{geometry:r,name:n}=e;if(r&&r.location){let{location:e}=r;return{position:e,title:n}}return null}).filter(e=>null!==e);m(e)}},[h]);let v=async e=>{try{let t=await y(e);p(t)}catch(e){console.error("Error fetching search results:",e)}},y=async e=>{console.log("PORT:",l.env.PORT),console.log("NODE_ENV:","production");try{let t=await i.Z.get("https://us-central1-jiffybook-public.cloudfunctions.net/googlePlacesTextSearch",{params:{query:e,key:"AIzaSyCn_5rImQH7nJ_PaM58WmUNMxYriM9w6a8"}});return console.log(t.data.results),t.data.results}catch(e){return console.error("Error fetching search results:",e),[]}};return(0,n.jsxs)(s.KJ,{googleMapsApiKey:"AIzaSyCn_5rImQH7nJ_PaM58WmUNMxYriM9w6a8",children:[(0,n.jsx)("div",{children:(0,n.jsx)(a,{onSearch:v})}),(0,n.jsxs)(s.b6,{mapContainerStyle:c,center:f||u,zoom:10,children:[f&&0===g.length&&(0,n.jsx)(s.Jx,{position:f,title:"Current Location"}),g.map((e,t)=>(0,n.jsx)(s.Jx,{position:e.position,title:e.title},t))]})]})},d=r(1326);r(5102);var h=(0,d.Z)(e=>{let{user:t}=e,[r,s]=(0,o.useState)([]),a=async e=>{try{let t=await i(e);s(t)}catch(e){console.error("Error fetching search results:",e)}},i=async e=>{try{return[{position:{lat:40.712776,lng:-74.005974},title:"New York"},{position:{lat:51.5074,lng:-.1278},title:"London"}]}catch(e){return console.error("Error fetching search results:",e),[]}};return console.log("called 1234",t),(0,n.jsx)("div",{children:t?(0,n.jsx)(f,{markers:r,onSearch:a}):(0,n.jsxs)("div",{className:"center-container",children:[(0,n.jsx)("p",{children:"Please log in."}),(0,n.jsx)("div",{className:"loader",children:" "})]})})})},5102:function(){},4734:function(e,t,r){"use strict";r.d(t,{hJ:function(){return n.V},O4:function(){return n.X},aT:function(){return n.a},v0:function(){return n.o}});var n=r(5492);r(7365),r(5568),r(9185),r(8341)}},function(e){e.O(0,[662,913,29,755,214,253,961,744],function(){return e(e.s=4863)}),_N_E=e.O()}]);